<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="chrome调试技巧 debugger   js代码停止在相应的位置   console.table   将对象打印成一个表格   console.time()   和console.endTime()联合使用测试代码运行时间   console.trace   获取函数执行时栈的追踪   monitor   追踪函数，每次调用函数时输出函数名和调用的参数  相关工具 React官网   (htt">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://zhang20110.github.io/study_notes.github.io/2021/07/19/react%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="chrome调试技巧 debugger   js代码停止在相应的位置   console.table   将对象打印成一个表格   console.time()   和console.endTime()联合使用测试代码运行时间   console.trace   获取函数执行时栈的追踪   monitor   追踪函数，每次调用函数时输出函数名和调用的参数  相关工具 React官网   (htt">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="c:/Users/Maibenben/AppData/Roaming/Typora/typora-user-images/image-20210427203139207.png">
<meta property="og:image" content="c:/Users/Maibenben/AppData/Roaming/Typora/typora-user-images/image-20210427203549665.png">
<meta property="og:image" content="c:/Users/Maibenben/AppData/Roaming/Typora/typora-user-images/image-20210502184146709.png">
<meta property="article:published_time" content="2021-07-19T08:59:21.240Z">
<meta property="article:modified_time" content="2021-08-25T11:54:36.818Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/Maibenben/AppData/Roaming/Typora/typora-user-images/image-20210427203139207.png">
  
    <link rel="alternate" href="/study_notes.github.io/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/study_notes.github.io/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/study_notes.github.io/css/style.css">

  
    
<link rel="stylesheet" href="/study_notes.github.io/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/study_notes.github.io/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/study_notes.github.io/">Home</a>
        
          <a class="main-nav-link" href="/study_notes.github.io/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/study_notes.github.io/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://zhang20110.github.io/study_notes.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-react笔记" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/study_notes.github.io/2021/07/19/react%E7%AC%94%E8%AE%B0/" class="article-date">
  <time class="dt-published" datetime="2021-07-19T08:59:21.240Z" itemprop="datePublished">2021-07-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="chrome调试技巧"><a href="#chrome调试技巧" class="headerlink" title="chrome调试技巧"></a>chrome调试技巧</h1><ol>
<li><strong>debugger</strong></li>
</ol>
<blockquote>
<p>js代码停止在相应的位置</p>
</blockquote>
<ol start="2">
<li><strong>console.table</strong></li>
</ol>
<blockquote>
<p>将对象打印成一个表格</p>
</blockquote>
<ol start="3">
<li><strong>console.time()</strong></li>
</ol>
<blockquote>
<p>和console.endTime()联合使用测试代码运行时间</p>
</blockquote>
<ol start="4">
<li><strong>console.trace</strong></li>
</ol>
<blockquote>
<p>获取函数执行时栈的追踪</p>
</blockquote>
<ol start="5">
<li><strong>monitor</strong></li>
</ol>
<blockquote>
<p>追踪函数，每次调用函数时输出函数名和调用的参数</p>
</blockquote>
<h1 id="相关工具"><a href="#相关工具" class="headerlink" title="相关工具"></a>相关工具</h1><ol>
<li>React官网</li>
</ol>
<blockquote>
<p>(<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/">https://zh-hans.reactjs.org/</a>)</p>
</blockquote>
<ol start="2">
<li>vscode的react插件：</li>
</ol>
<blockquote>
<p> 用于简化react代码的编写<img src="C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427203139207.png" alt="image-20210427203139207"></p>
<p><img src="C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427203549665.png" alt="image-20210427203549665"></p>
</blockquote>
<ol start="3">
<li>google前端助手插件</li>
</ol>
<blockquote>
<p>FeHelper: 用于格式化JSON数据格式</p>
</blockquote>
<ol start="4">
<li>axios(详细请看四小时快速上手文档)</li>
</ol>
<blockquote>
<p>ajax请求库，用于在React中请求后端数据</p>
<p>引入方式：</p>
<blockquote>
<p>第一种：CDN在线引入</p>
<p>第二种：npm i axios命令下载到当前文件夹下，然后通过import引入</p>
</blockquote>
</blockquote>
<ol start="5">
<li>react的UI组件库</li>
</ol>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://ant.design/index-cn">蚂蚁金服的</a></p>
<p>引入方式：<code>npm install antd</code></p>
</blockquote>
<h1 id="小知识点补充"><a href="#小知识点补充" class="headerlink" title="小知识点补充"></a>小知识点补充</h1><ol>
<li><strong>解构赋值+重命名</strong></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let obj = &#123;a: &#123;b: 1&#125;&#125;</span><br><span class="line">const &#123;a&#125; = obj;</span><br><span class="line">const &#123;a: &#123;b&#125;&#125; = obj;</span><br><span class="line">const &#123;a: &#123;b: value&#125;&#125; = obj;//解构出并将b重命名为value</span><br><span class="line"></span><br><span class="line">console.log(a) //&#123;b:1&#125;</span><br><span class="line">console.log(b) //&#123;1&#125;</span><br><span class="line">console.log(value) //&#123;1&#125;</span><br><span class="line">//数组解构赋值</span><br><span class="line">let arr = [1,2];</span><br><span class="line">const [a,b] = arr;</span><br><span class="line">console.log(a,b); //1,2</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>fetch请求</strong></li>
</ol>
<blockquote>
<p>和XMLHttpRequest()类似，可以向后端请求数据</p>
<p>why fetch：</p>
<ul>
<li>基于promise封装</li>
<li>符合关注分离原则(一种模式)</li>
</ul>
</blockquote>
<p>最佳实践：</p>
<p>promise</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fetch(url).then(<span class="function"><span class="params">response</span> =&gt;</span> response.json())</span><br><span class="line">  .then(<span class="function"><span class="params">data</span> =&gt;</span> <span class="built_in">console</span>.log(data))</span><br><span class="line">  .catch(<span class="function"><span class="params">e</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">&quot;Oops, error&quot;</span>, e))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 首先fetch和服务器连接成功则调用then方法 失败则调用catch方法</span></span><br><span class="line"><span class="comment">// 连接成功后通过response原型上的json方法获取带有数据的promise对象</span></span><br><span class="line"><span class="comment">// 在通过then方法获取数据</span></span><br><span class="line"><span class="comment">// 两个then应该有两个catch方法，但错误应该只处理一次然后结束，所以catch写在最后</span></span><br><span class="line"><span class="comment">// 无论是哪个then失败了都会调用最后的catch方法并结束调用</span></span><br></pre></td></tr></table></figure>

<p>async和awiat</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">myFetch</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> response = <span class="keyword">await</span> fetch(url);</span><br><span class="line">      <span class="keyword">let</span> data = <span class="keyword">await</span> response.json();</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;Oops, error&quot;</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 通过try和catch获取promise的reject错误</span></span><br></pre></td></tr></table></figure>

<p>参考：</p>
<blockquote>
<p>(<a target="_blank" rel="noopener" href="https://github.github.io/fetch/">https://github.github.io/fetch/</a>)</p>
<p>(<a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000003810652">https://segmentfault.com/a/1190000003810652</a>)</p>
</blockquote>
<h1 id="vue和react的比较"><a href="#vue和react的比较" class="headerlink" title="vue和react的比较"></a>vue和react的比较</h1><p>组件化方式不同：</p>
<blockquote>
<ol>
<li>vue通过 <code>.vue</code>文件，来创建相应的组件<ul>
<li>template  结构</li>
<li>script  组件</li>
<li>style  样式</li>
</ul>
</li>
<li>react中有组件化的概念，但没有组件模块文件，react中一切都是以JS来表现的</li>
</ol>
</blockquote>
<h1 id="React概览"><a href="#React概览" class="headerlink" title="React概览"></a>React概览</h1><p>核心思想：</p>
<blockquote>
<p>封装组件  (各个组件维护自己的状态和UI  当状态改变后自动更新组件)</p>
</blockquote>
<p>React概念组成：</p>
<ul>
<li>组件</li>
<li>JSX  (JS支持HTML的嵌入)</li>
<li>Virtual DOM </li>
<li>Data Flow (单向数据绑定)</li>
</ul>
<h1 id="JSX语法"><a href="#JSX语法" class="headerlink" title="JSX语法"></a>JSX语法</h1><p>全称：</p>
<blockquote>
<p>Javascript XML</p>
</blockquote>
<p>语法：</p>
<ul>
<li>定义虚拟DOM时不需要用引号</li>
<li>标签必须闭合，即必须有<code>/</code></li>
<li>通过{}在JSX标签中混入JS<em><strong>表达式</strong></em>(不能识别<em><strong>语句</strong></em>)</li>
<li>样式的类名用className代替class(因为class是ES的关键字)</li>
<li>通过<code>&#123;&#123;&#125;&#125;`写入内联样式(外层&#123;&#125;表示内层是JS表达式，识别内层`&#123;&#125;`为JS对象)
* 只能有一个根标签
* 标签首字母
  1. 若小写字母开头，则直接转换成同名的html标签
  2. 若大写字母开头，则渲染相应的组件

语句和表达式区别：

> 表达式有返回值  语句没有 
>
> **特殊：**JSX中可以自动遍历数组内的内容，但无法遍历对象内的内容

# React简单开始

步骤：

* 写入原生html作为容器
* 引入React核心库、React-DOM库和Babel库 （ 核心库需要在DOM库之前引入 ，且核心库和DOM库分别引入了**React和ReactDOM全局对象**）
* 引入babel类型的script标签  
* 创建虚拟DOM
* 渲染虚拟DOM

代码：

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 准备好一个“容器” --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;test&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;!-- 引入react核心库 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react@17/umd/react.development.js&quot;</span> <span class="attr">crossorigin</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 引入react-dom，用于支持react操作DOM --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/react-dom@17/umd/react-dom.development.js&quot;</span> <span class="attr">crossorigin</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- 引入babel，用于将JSX转换为js --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/babel-standalone@6/babel.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!--引入prop-type库  定义组件的props传入数据的类型限制  --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/prop-types@15.6/prop-types.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/babel&quot;</span>&gt;</span><span class="javascript">  <span class="comment">/*此处一定要写label*/</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 创建虚拟DOM</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> VDOM = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;  <span class="comment">/*此处不需要加引号*/</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 渲染虚拟DOM</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    ReactDOM.render(VDOM, <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#test&#x27;</span>));  </span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

# 虚拟DOM的两种创建方式

通过原生的js代码

> 通过React.createElement(标签名，属性集合，内容字符串)

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VDOM = React.createElement(<span class="string">&#x27;h1&#x27;</span>,&#123;<span class="attr">id</span>:<span class="string">&#x27;title&#x27;</span>&#125;, <span class="string">&#x27;Hello React&#x27;</span>);</span><br></pre></td></tr></table></figure>

通过JSX语法

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VDOM = <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">&quot;title&quot;</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br></pre></td></tr></table></figure>

* 创建多行DOM (通过括号实现格式化创建)

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> VDOM = (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">span</span>&gt;</span>Hello,React<span class="tag">&lt;/<span class="name">span</span>&gt;</span>    </span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        ) </span><br></pre></td></tr></table></figure>

比较：

> JSX语法创建虚拟DOM相当于原生创建虚拟DOM的语法糖  

# 动态渲染列表

> 利用JSX语法可以自动遍历数组

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">&#x27;Vue&#x27;</span>, <span class="string">&#x27;React&#x27;</span>, <span class="string">&#x27;Auge&#x27;</span>];</span><br><span class="line"><span class="keyword">const</span> VDOM = (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;</span></span><br><span class="line"><span class="xml">                arr.map((v, i)=&gt;&#123;</span></span><br><span class="line"><span class="xml">                    return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span>&gt;</span>&#123;v&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                &#125;)  //arr.map()函数有返回值，是表达式</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">) </span><br><span class="line">ReactDOM.render(VDOM, <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#test&#x27;</span>));</span><br></pre></td></tr></table></figure>

#### key值的作用

作用：

> 用于标识虚拟DOM中的标签，便于标签的复用

如果不引入key:

> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//旧的dom</span></span><br><span class="line">&lt;ul&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Duke<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Villanova<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"><span class="comment">//新的dom</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Connecticut<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Duke<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span>&gt;</span>Villanova<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
>
> 上述情况发生后，React无法识别Duke和Villanova没有改变可以复用，实际上会修改Duke  ---->  Connecticut ; Villanova---->  Duke  并创建新的节点<li>Villanova</li>，效率不高

引入key：

> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2015&quot;</span>&gt;</span>Duke<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2016&quot;</span>&gt;</span>Villanova<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2014&quot;</span>&gt;</span>Connecticut<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2015&quot;</span>&gt;</span>Duke<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&quot;2016&quot;</span>&gt;</span>Villanova<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
>
> 保留Duke和Villanova，只创建了新的Conecticut，提高了效率

补充：

> 用index作为key值的隐患：
>
> * 对数组不在数组的末尾进行添加和删除，打乱了后续元素的index导致
>   1.   页面显示没有问题，但效率变低
>   2.   如果出现了表单元素则页面显示也可能出现问题
>
> 例子：
>
> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        <span class="attr">person</span>: [</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;小张&#x27;</span>, <span class="attr">age</span>: <span class="number">10</span>&#125;,</span><br><span class="line">            &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;小李&#x27;</span>, <span class="attr">age</span>: <span class="number">11</span>&#125;</span><br><span class="line">        ]    </span><br><span class="line">    &#125;</span><br><span class="line">    myAdd = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> p = &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;小王&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span>&#125;;</span><br><span class="line">        <span class="keyword">const</span> &#123;person&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">        person.unshift(p);</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;person&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.myAdd&#125;</span>&gt;</span>添加小王<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    &#123;</span></span><br><span class="line"><span class="xml">                        this.state.person.map((v,i)=&gt;&#123;</span></span><br><span class="line"><span class="xml">                            return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;i&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                                        &#123;v.name&#125;====&#123;v.age&#125;</span></span><br><span class="line"><span class="xml">                                        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">                                    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        &#125;)</span></span><br><span class="line"><span class="xml">                    &#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span>    </span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">Person</span>/&gt;</span></span>, <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#test&#x27;</span>));</span><br></pre></td></tr></table></figure>
>
> 解释：由于出现了表单元素导致页面显示也出现了问题。错把小张的 input给了小王



# React中的DOM差异

> React 实现了一套独立于浏览器的 DOM 系统，**兼顾了性能和跨浏览器的兼容性**。我们借此机会**完善了浏览器 DOM 实现的一些特殊情况**。

* 标签属性命名

> React中所有的html属性都是小驼峰命名的，例外的情况是 `aria-*` 以及 `data-*` 属性，都用小写

* checked

> 当input类型是checkbox或radio时使用。
>
> 当设置后只能通过onChange事件改变标签是否被选中而不能直接通过点击改变标签是否选中(不同于普通的checked属性，因为React会将其设置为read-only)
>
> 也可以通过defaultChecked设置是否被选中，但此属性只执行一次，及只有在初始化的时候起作用，后面如果改变defaultChecked的值也无法改变是否选中，一般用于非受控组件

* className

> 由于和关键字class冲突，将class属性变为className

* onchange

> 实现类似于原生oninput事件

* selected

> 原生select选择标签中option的selected属性不被React推荐，通过在select标签上设置value属性代替，使select能和其他表单组件有相似的操作，通过value获取表单的值
>
> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">value</span>=<span class="string">&#123;</span>&#x27;<span class="attr">1</span>&#x27;&#125;&gt;</span>  //默认选择第二个option</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span> &gt;</span>b<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
>
>   

* style

> React中通过对象给strle赋值而不是原生中通过字符串
>
> 注意：React会自动在内联样式的数字后面添加px单位，如果不同px单位请将数位和单位设置为字符串形式
>
> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Result style: &#x27;10px&#x27;</span></span><br><span class="line">&lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="number">10</span> &#125;&#125;&gt;</span><br><span class="line">  Hello World!</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Result style: &#x27;10%&#x27;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">height:</span> &#x27;<span class="attr">10</span>%&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">  Hello World!</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
>
>   

* value

> 类似checked，受控组件用value设置默认值，非受控组件利用defaultValue设置默认值。
> 且checked设置后表单标签被设置为read-only，只能通过onChange事件该表值



# React组件开发

> 组件必须以大写字母开头

#### 函数式组件

> 适用：
>
> > 适用于简单组件；如果组件只有render方法和props，没有state则可以使用函数式组件
>
> 使用：
>
> > 以大写字母开头的标签使用
>
> 函数内的this指向undefined，因为JSX语法被babel翻译后开启了严格模式
>
> 代码：
>
> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是函数式组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>, <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#test&#x27;</span>));</span><br></pre></td></tr></table></figure>

补充：

> 从React16.8.0以后的版本引入的Hooks特性，函数也可以拥有state状态(正常来说因为函数this指向undefined所以没有state)
>
> 1. **React.useState()**
>
> > React包中的useState方法
> >
> > 参数：[初始状态值]; 一个
> >
> > 返回值: [状态值, 函数]
> >
> > 形式：`const [xxxx, setXxxx]=React.useState(initValue)`
> >
> > * 返回的函数用于更新状态(**两种方式**)
> >
> >   > 参数：新的状态值或回调函数
> >   >
> >   > 如果是函数，则状态值作为参数
> >
> > 例子：
> >
> > <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>);</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// setCount(count+1); //新的状态值作为参数</span></span><br><span class="line">        setCount(<span class="function"><span class="params">c</span>=&gt;</span>c+<span class="number">1</span>); <span class="comment">//回调函数作为参数</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span>&gt;</span>等于：&#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;add&#125;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
> >
> > **注意：**每次更新状态值后都会重新调用函数，由于React底层的处理，React.useState方法后面不会再更新初始值(否则会没执行一次后将count改为0) 
>
> 2. **React.useEffent**
>
> ![image-20210502104506256](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210502104506256.png)
>
> 	>**重点: **useEffect函数的第二个参数指定检测哪个state的改变，只有对应状态改变后触发的更新才会调用前面的函数
>
> 例子：
>
> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">const</span> [name, setName] = React.useState(<span class="string">&#x27;Jack&#x27;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    setCount(<span class="function"><span class="params">c</span>=&gt;</span>c+<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">change</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    setName(<span class="string">&#x27;Zhang&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">React.useEffect(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;@&#x27;</span>); <span class="comment">//只在第一次调用函数和更新count的时候打印</span></span><br><span class="line">&#125;,[count])</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>等于：&#123;count&#125;----&#123;name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;add&#125;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;change&#125;</span>&gt;</span>改名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
>
> 3. **React.createRef()**
>
>  和类中的React.createRef()一样
>
> 例子：
>
> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取输入框</span></span><br><span class="line"><span class="keyword">const</span> myRef = React.createRef();</span><br><span class="line"><span class="keyword">const</span> [content, setCont] = React.useState(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"><span class="comment">//显示输入</span></span><br><span class="line"><span class="keyword">const</span> show = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> con = myRef.current.value;</span><br><span class="line">    setCont(con);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">ref</span>=<span class="string">&#123;myRef&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;show&#125;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>显示内容：&#123;content&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
>
> 



#### 类式组件

> 适用：
>
> > 复杂组件
>
> 使用：
>
> > 以大写字母开头的标签使用
>
> 定义：
>
> > 定义React.Component类的子类  并定义原型方法render()  供实例调用
>
> 代码：
>
> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是类组件 使用于复杂组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
>
>   

补充：

> 有无状态分别对应着复杂组件和简单组件

#### 类组件的constructor函数

> 写和不写的区别：
>
> > 如果写则必须将props属性传入super，否则组件实例可能没有props属性
> >
> > <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">constructor</span> (<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;constructor&#x27;</span>,<span class="built_in">this</span>.props); <span class="comment">//constructor undefined</span></span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
> >
> >  
>
> 构造函数一般用于以下两种情况：(都可以绕过constructor实现)
>
> - 通过给 `this.state` 赋值对象来初始化内部 state
> - 为事件处理函数的this绑定到组件实例(通过bind方法)

#### 组件的render函数

> 初始化的时候调用一次
>
> 此后只要组件的state或props变化就调用一次render

# FragMent组件

> Fragments 允许你将子列表分组，而无需向 DOM 添加额外节点

使用：

> * 从React包中引入组件FragMent
> * `<Fragment></Fragment>`或 `<></>`
>
> **注意**：Fragment只支持key属性，但它的简写形式`<></>`不支持key

# 组件的三大属性

来源：

> 通过继承React.Component类获得，作为**实例属性**

#### state

作用：

> 保存组件的**内部**状态数据

使用：

> 通过对象形式对数据进行维护
>
> 通过React.Component原型上的setState方法进行修改

代码：

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    state = &#123;<span class="attr">isHot</span>: <span class="literal">true</span>&#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;  <span class="comment">//由内部的组件实例调用 所以this指向组件实例</span></span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">onClick</span>=<span class="string">&#123;this.demo&#125;</span>&gt;</span>今天天气&#123;this.state.isHot ? &#x27;炎热&#x27; : &#x27;凉爽&#x27;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    demo = <span class="function">() =&gt;</span> &#123;  <span class="comment">//箭头函数定义  内部的this指向外部词法域的this  所以指向组件实例(外部是个类 类的this指向类new出来的实例)</span></span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;<span class="attr">isHot</span>: !<span class="built_in">this</span>.state.isHot&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyComponent</span>/&gt;</span></span>, <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#test&#x27;</span>));</span><br></pre></td></tr></table></figure>

补充：

> * 类组件内部的函数一般都是作为回调函数来使用，为了控制函数内this的指向，所以一般定义箭头函数，使this指向组件实例，便于使用组件实例的属性
>
> * 组件内的标签事件被React进行了封装，名字统一变为大写字母开头(如onclick变为onClick)
>
> * 原型上的setState方法
>
>   > * 参数：(obj/func[, callback])
>   >
>   >   > 第一个参数可以是对象，也可以是函数
>   >   > 如果是函数的话，函数有两个参数分别接受state和props对象，然后返回是更新的state对象
>   >   >
>   >   > 第二个参数可选，是回调函数，在状态更新完成后(即调用render后)调用此回调函数；setState是**异步更新**的
>   >
>   > * 总结
>   >
>   >   > setState分为两类：对象式和函数式，对象式类似于函数式的语法糖
>   >
>   > * 例子：
>   >
>   >   <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;<span class="attr">count</span>: <span class="number">0</span>&#125;; <span class="comment">//初始化state状态</span></span><br><span class="line">addCount = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(<span class="function">(<span class="params">state,props</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;state&#x27;</span>, state);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;props&#x27;</span>, props);</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="attr">count</span>: state.count+<span class="number">1</span>&#125;;</span><br><span class="line">    &#125;, <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//获取更新后的state值</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;nowState&#x27;</span>, <span class="built_in">this</span>.state, a);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;count&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">h1</span> &gt;</span>count: &#123;count&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.addCount&#125;</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
>   >
>   >   

#### props

作用：

> 获取组件外部的数据

使用：

> 通过组件标签属性传递外部数据到组件，组件内部通过props属性获得，props属性是组件的实例属性
>
> 传递属性：
>
> * 传递少数数据。
> * &#123;...对象&#125;批量传递数据。相当于第一种方法的语法糖 (注意这只在babel和React联合下才起作用，在正规的ES语法中...不能展开对象)
>
> 传递数据类型限制： (需要引入**prop-type库**，全局多了一个对象PropTypes)
>
> + 显示传递的数据类型和必须性 。通过类的静态属性propTypes
> + 设置默认值 。通过类的静态属性defauletProps

注意：React命名规范规定，如果props参数代表的是事件的监听，则最好命名为on[Event],对应的监听方法命名为handle[Event]

代码:

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;  </span><br><span class="line">        <span class="keyword">let</span> &#123;a, b&#125; = <span class="built_in">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;a&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">li</span>&gt;</span>&#123;b&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">               <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> propTypes = &#123;</span><br><span class="line">    	<span class="attr">a</span>: PropTypes.string,</span><br><span class="line">   	 	<span class="attr">b</span>: PropTypes.number</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">static</span> defaultProps = &#123;</span><br><span class="line">    	<span class="attr">b</span>: <span class="number">111</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = &#123;<span class="attr">a</span>:<span class="string">&#x27;1&#x27;</span>, <span class="attr">b</span>:<span class="string">&#x27;2&#x27;</span>&#125;;</span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyComponent</span> &#123;<span class="attr">...p</span>&#125;/&gt;</span></span>, <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#test&#x27;</span>));</span><br></pre></td></tr></table></figure>

补充：

> 函数组件也有props，是以参数的形式接受的，同样可以给函数定义propTypes和defaultProps来限制传入的数据类型，但一般不怎么用
>
> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyComponent</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;data&#125; = props;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span> 传递了&#123;data&#125; <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">MyComponent.propTypes = &#123;</span><br><span class="line">    <span class="attr">data</span>: PropTypes.number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
>
>    

#### refs

> 获取组件内的html标签，本身是对象

获取标签

* 通过字符串

  > 通过标签的ref属性设置key，组件自动获取标签作为值
  >
  > <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;input1&quot;</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showTip&#125;</span>  <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">showTip = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;input1&#125; = <span class="built_in">this</span>.refs;</span><br><span class="line">    <span class="built_in">console</span>.log(input1.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  >
  >  

* 通过回调函数

  > 通过回调函数将标签绑定到实例的属性上(不在绑定到实例的refs中)
  >
  > <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input ref=&#123;ele=&gt;this.input1=ele&#125; onBlur=&#123;this.showTip&#125;  type=&quot;text&quot;/&gt;</span><br></pre></td></tr></table></figure>
  >
  >  

* 通过React.createRef创建容器

  > 自动获取标签绑定到React.creatRef创建的容器中(一个容器只能存储一个标签)
  >
  > <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">input1 = React.createRef();</span><br><span class="line">render () &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&#123;this.input1&#125;</span> <span class="attr">onBlur</span>=<span class="string">&#123;this.showTip&#125;</span>  <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span>&amp;nbs</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">showTip = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> input1 = <span class="built_in">this</span>.input1.current;</span><br><span class="line">    <span class="built_in">console</span>.log(input1.value, <span class="built_in">this</span>.input1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  >
  >   

  补充：

  > * 三种方式中string方式不推荐使用
  >
  > * 不要过多的使用ref
  >   1. 如果事件函数需要使用标签，可以通过target获取而不需要ref

  

# 数据的不可变性

引言：

> 一般改变数据有两种方式，一种是直接改变变量值，另外一种是用新的数据替代旧的数据；例子：
>
> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;<span class="attr">a</span>: <span class="string">&#x27;a&#x27;</span>, <span class="attr">b</span>:<span class="string">&#x27;a&#x27;</span>&#125;;</span><br><span class="line">data.b = <span class="string">&#x27;b&#x27;</span> <span class="comment">// 直接改变变量值</span></span><br><span class="line"><span class="keyword">let</span> copy = <span class="built_in">Object</span>.assign(&#123;&#125;, data, &#123;<span class="attr">b</span>: <span class="string">&#x27;b&#x27;</span>&#125;) <span class="comment">// 替代旧数据</span></span><br><span class="line"><span class="comment">// 也可以简化为 copy = &#123;...data, b: &#x27;b&#x27;&#125; ES2018支持</span></span><br></pre></td></tr></table></figure>
>
>   

应用：一般在React中改变对象数据时，需要保持数据不可变性，应用在state改变时

不可变性优点：

* 简化复杂功能的实现，如：回溯以前的状态等功能
* 易于跟踪数据；直接通过===就可以判断数据是否改变，如React的*pure components*，通过===比较很容易的判断是否需要重新渲染组件[详细](https://zh-hans.reactjs.org/docs/optimizing-performance.html#examples)

# 状态提升

应用：

> 当父组件需要子组件的state信息，这是可以状态提升，将子组件的状态提升到父组件

# 组件内容

组件可以像标签一样使用，组件标签的内容被自动添加为props的children属性

例子

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MyNavLink组件是对NavLink组件的封装</span></span><br><span class="line">&lt;MyNavLink to=<span class="string">&quot;page2&quot;</span>&gt;Page2&lt;/MyNavLink&gt; </span><br><span class="line"><span class="comment">//在MyNavLink组件中通过props属性获得了标签体内容Page2</span></span><br><span class="line"><span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">NavLink</span> &#123;<span class="attr">...this.props</span>&#125;/&gt;</span></span></span><br></pre></td></tr></table></figure>

补充：

> A是B组件的父组件，书写的形式有两种
>
> 第一种:
>
> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//直接在A组件中书写使用&lt;B/&gt;</span><br></pre></td></tr></table></figure>
>
> 第二种：
>
> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//假设Demo组件中使用了A组件</span><br><span class="line">&lt;A&gt;</span><br><span class="line">	&lt;B/&gt;</span><br><span class="line">&lt;/A&gt;</span><br></pre></td></tr></table></figure>
>
> 

**高级应用**：

应用解释：

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//假设A组件是你写的组件，让其能显示外部传入的内容</span><br><span class="line">//当然可以用props获取外部数据，但外部传入的是<span class="emphasis">*组件*</span>而不是简单的数据</span><br><span class="line">//假设外部传入的组件是B</span><br><span class="line">//第二种方法的优点是可以使B获取A的状态</span><br><span class="line">//如果传入的组件只是简单的展示可以用第一种方法，但如果需要传入的组件根据A的状态进行相应的改变，则需要用第二种方法</span><br></pre></td></tr></table></figure>



![image-20210502161146007](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210502161146007.png)

例子：

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 第一种方法</span></span><br><span class="line">        <span class="comment">// &lt;div&gt;</span></span><br><span class="line">        <span class="comment">//     &lt;A &gt; &lt;B name=&quot;小高&quot;/&gt; &lt;/A&gt;</span></span><br><span class="line">        <span class="comment">// &lt;/div&gt;</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="comment">// 第二种方法</span></span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                 <span class="tag">&lt;<span class="name">A</span> <span class="attr">render</span>=<span class="string">&#123;name</span>=&gt;</span><span class="tag">&lt;<span class="name">B</span> <span class="attr">data</span>=<span class="string">&#123;name&#125;/</span>&gt;</span>&#125;&gt; <span class="tag">&lt;/<span class="name">A</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;<span class="attr">name</span>: <span class="string">&#x27;A&#x27;</span>&#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// 第一种方法</span></span><br><span class="line">        <span class="comment">//  &#123;this.props.children&#125; </span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                A</span></span><br><span class="line"><span class="xml">                &#123;this.props.render(this.state.name)&#125;</span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>B----&#123;this.props.data&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



# 组件懒加载

> 一般用于路由组件，当点击相应的路由时在加载对应的路由组件

步骤：

* 从react包中引入lazy**函数**和Suspense组件

* 通过lazy函数懒加载路由组件

  > `**const** Page1 = lazy(()**=>**import('./pages/page1'));`

* 利用Suspense将路由组件包裹

  > 当路由组件没有加载完成时显示Suspense组件
  >
  > Suspense组件fallback属性接受一个**组件**(标签形式的组件而不是对象或函数)，用于显示加载中的UI

例子:

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//从react包中引入lazy和Suspense</span></span><br><span class="line"><span class="keyword">import</span> &#123; Component,lazy,Suspense &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Loading <span class="keyword">from</span> <span class="string">&#x27;./component/Loading&#x27;</span>;</span><br><span class="line"><span class="comment">//懒加载路由组件</span></span><br><span class="line"><span class="keyword">const</span> Page1 = lazy(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./pages/page1&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> Page2 = lazy(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./pages/page2&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/page1&quot;</span>&gt;</span>page1<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/page2&quot;</span>&gt;</span>page2<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">Loading</span>/&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/page1&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Page1&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/page2&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Page2&#125;/</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



# 组件通信

有三个方向的通信：父组件向子组件传递信息，子组件向父组件传递信息以及兄弟组件之间的信息传递

1. 父组件向子组件传递信息

> 通过组件的props属性

2. 子组件向父组件传递信息

> 通过函数的参数
>
> * 父组件将数据的相应逻辑封装在函数中并传递给子组件
> * 子组件通过props获得函数传入参数并调用

3. 兄弟组件之间的传递

> 通过消息订阅和发布机制
>
> * 首先引入消息订阅和发布的支持模块pubsub-js(通过node安装)
>
>   > `npm install pubsub-js`
>
> * 然后引入pubsub-js模块
>
>   > `import PubSub from 'pubsub-js'`或者
>   >
>   > `const PubSub = require('pubsub-js');`
>
> * 订阅发布信息
>
>   > 订阅信息：(在componentDidMount钩子函数中订阅)
>   >
>   > <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const mySubscriber = function (msg, data) &#123;</span><br><span class="line">    console.log( msg, data );</span><br><span class="line">&#125;;</span><br><span class="line">//MY TOPIC是特定的消息名字，用于获取对应的消息</span><br><span class="line">//返回值token类似id 用于消除订阅</span><br><span class="line">const token = PubSub.subscribe(&#x27;MY TOPIC&#x27;, mySubscriber); </span><br></pre></td></tr></table></figure>
>   >
>   > 发布消息
>   >
>   > <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//MY TOPIC是特定的消息名字</span><br><span class="line">//&#x27;hello world!&#x27;是消息的内容</span><br><span class="line">PubSub.publish(&#x27;MY TOPIC&#x27;, &#x27;hello world!&#x27;);</span><br></pre></td></tr></table></figure>
>   >
>   >  
>
> **注意**：需要在componentWillUnmount中取消订阅`PubSub.publishSync('MY TOPIC', 'hello world!');`
>
> 参考地址：
>
> > pubsubjs地址：(https://github.com/mroderick/PubSubJS)

**实际上发布订阅模式使用于任何形式的信息传递，子传父和父传子都可以**

例子：

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 访问github的头像和用户名信息</span></span><br><span class="line"><span class="comment">//地址(https://api.github.com/search/users?q=xxxx)</span></span><br><span class="line"><span class="comment">//省略了引入pubsub模块等信息，只挂出了关键代码</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*在App组件中引入两个模块，search和list分别用于搜索用户和显示用户*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Search</span>/&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">List</span>/&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*list组件订阅信息*/</span></span><br><span class="line"><span class="comment">//初始化状态</span></span><br><span class="line">state = &#123;</span><br><span class="line">    <span class="attr">persons</span>:[],</span><br><span class="line">    <span class="attr">token</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//组件挂载后立刻订阅信息</span></span><br><span class="line"><span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> token = Pubsub.subscribe(<span class="string">&#x27;persons&#x27;</span> ,<span class="function">(<span class="params">_,data</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">const</span> persons = data.items;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;dy&#x27;</span>,persons);</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;token, persons&#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//组件卸载前取消订阅</span></span><br><span class="line"><span class="function"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    Pubsub.publishSync(<span class="built_in">this</span>.state.token);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;persons&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;</span></span><br><span class="line"><span class="xml">                persons.map((v)=&gt;&#123;</span></span><br><span class="line"><span class="xml">                    return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;v.id&#125;</span>&gt;</span>&#123;v.login&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">                &#125;)</span></span><br><span class="line"><span class="xml">            &#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*serch发布信息*/</span></span><br><span class="line">searchName = <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="comment">//按回车键后通过fetch向后端查找信息</span></span><br><span class="line">    <span class="keyword">if</span> (e.keyCode !== <span class="number">13</span>) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">const</span> key = e.target.value;</span><br><span class="line">    fetch(<span class="string">`https://api.github.com/search/users?q=<span class="subst">$&#123;key&#125;</span>`</span>)</span><br><span class="line">        .then(<span class="function"><span class="params">res</span>=&gt;</span>res.json())</span><br><span class="line">        .then(<span class="function"><span class="params">data</span>=&gt;</span>Pubsub.publish(<span class="string">&#x27;persons&#x27;</span>,data))</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span>=&gt;</span><span class="built_in">console</span>.log(<span class="string">&#x27;fetch请求出错&#x27;</span> ,err));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">onKeyUp</span>=<span class="string">&#123;this.searchName&#125;</span> <span class="attr">placeholder</span>=<span class="string">&quot;输入关键字回车搜索&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**补充：**

*利用Context可以方便的实现**祖组件**和**后代组件**之间的通信*

![image-20210502140751164](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210502140751164.png)

注意：

* provider可以的value可以传递普通数据，也可以传递对象数据
* provider包裹的组件及其后代组件都可以接受vlue中的值

例子：

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React,&#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyContext = React.createContext();</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;<span class="attr">username</span>: <span class="string">&#x27;小王&#x27;</span>&#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;username&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是A组件，我的用户名：&#123;username&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">MyContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;username&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">B</span>/&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">MyContext.Provider</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是B组件<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">C</span>/&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">D</span>/&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//contextType方法获取值，仅适用于类组件</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> contextType = MyContext; <span class="comment">//声明接受context</span></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是C组件，我接受A组件的用户名：&#123;this.context&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Consumer获取值，适用于函数和类</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">D</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是D组件，我接受A组件的用户名：</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">MyContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;v=&gt;v&#125;</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">MyContext.Consumer</span>&gt;</span>    </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr> 

# 组件优化

Component组件的2个问题：

> 1. 只要使用了setState(),即使不改变状态数据，组件也会重新render()  
> 2. 父组件重新render会导致子组件也重新render，即使子组件没有任何的改变(即没有接受什么父组件的数据或接受的数据没有改变)

![image-20210502150645207](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210502150645207.png)

**PureComponent组件的注意点解释**

> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const obj = this.state;</span><br><span class="line">obj.name = &#x27;小高&#x27;;</span><br><span class="line">this.setState(obj);</span><br><span class="line">//如果用PureComponent组件，则上述方式无法触发更新</span><br><span class="line">//因为是浅比较，obj和this.state是同一个引用，所以在shouldMountUpdate钩子中返回false，不会触发更新</span><br></pre></td></tr></table></figure>
>
>  

*自己用shouldComponentUpdate简单模拟PureComponent组件：*

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;<span class="attr">name</span>: <span class="string">&#x27;小张&#x27;</span>&#125;</span><br><span class="line">    changeName = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;<span class="attr">name</span>: <span class="string">&#x27;小高&#x27;</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">Nextprops, nextState</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//如果名字没有改变则不触发更新</span></span><br><span class="line">        <span class="keyword">return</span> !(nextState.name === <span class="built_in">this</span>.state.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;name&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Parent---render&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Parent的名字：&#123;name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">                &#123;/* 点击按钮后父组件更新而子组件由于没有改变不会更新 */&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.changeName&#125;</span>&gt;</span>改名<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Son</span> <span class="attr">name</span>=<span class="string">&quot;小丽&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Son</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Son</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">Nextprops</span>)</span> &#123;</span><br><span class="line">        <span class="comment">//如果props没有改变则不触发更新</span></span><br><span class="line">        <span class="keyword">return</span> !(Nextprops.name === <span class="built_in">this</span>.props.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;Son---render&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Son的名字：&#123;this.props.name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



# React事件绑定

> 对原生事件进行了封装，事件名称和this指向等都发生了变化

目的：

> 提高兼容性

事件绑定：

> 为了避开DOM的操作，一般直接将事件函数绑定在标签上

代码

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.submit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">            密码：    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;input提交&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">submit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;触发了&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



# 受控组件和非受控组件

> 即不同方式获取表单的输入值

定义：

+ 非受控组件**即时**获取表单的输入；受控组件将表单的值存储在state中通过state获取

非受控组件代码:

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;form onSubmit=&#123;this.submit&#125;&gt;</span><br><span class="line">            用户名：&lt;input ref=&#123;ele=&gt;this.username=ele&#125; type=&quot;text&quot;/&gt;</span><br><span class="line">            密码：  &lt;input ref=&#123;ele=&gt;this.password=ele&#125; type=&quot;text&quot;/&gt;</span><br><span class="line">            	   &lt;button&gt;提交&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">submit = (e) =&gt; &#123;</span><br><span class="line">    const &#123;username,password&#125; = this;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    //通过ref即时获取表单的值</span><br><span class="line">    console.log(username.value,password.value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

受控组件代码: (本质上是vue中的双向数据绑定)

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;&#125;;<span class="comment">//状态初始化</span></span><br><span class="line">saveFormData = <span class="function">(<span class="params">typeData</span>)=&gt;</span>&#123;  <span class="comment">//高阶函数</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">(<span class="params">e</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;[typeData]: e.target.value&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="xml"><span class="tag">&lt;<span class="name">form</span> <span class="attr">onSubmit</span>=<span class="string">&#123;this.submit&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.saveFormData(</span>&#x27;<span class="attr">username</span>&#x27;)&#125; <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">            密码：    <span class="tag">&lt;<span class="name">input</span> <span class="attr">onChange</span>=<span class="string">&#123;this.saveFormData(</span>&#x27;<span class="attr">password</span>&#x27;)&#125; <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">submit = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123;username,password&#125; = <span class="built_in">this</span>.state;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="built_in">console</span>.log(username,password);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

受控组件代码补充：

> 高阶函数定义：
>
> * 接受参数有函数
> * 返回值是函数
>
> 通过高阶函数的应用实现了一个函数绑定多个表单输入值
>
> 也可以有另外一种方式实现：
>
> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;&#125;;//状态初始化</span><br><span class="line">saveFormData = (typeData, e)=&gt;&#123; </span><br><span class="line">    this.setState(&#123;[typeData]: e.target.value&#125;);</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;form onSubmit=&#123;this.submit&#125;&gt;</span><br><span class="line">            用户名：&lt;input onChange=&#123;e=&gt;this.saveFormData(&#x27;username&#x27;,e)&#125; type=&quot;text&quot;/&gt;</span><br><span class="line">            密码： &lt;input onChange=&#123;e=&gt;this.saveFormData(&#x27;password&#x27;,e)&#125; type=&quot;text&quot;/&gt;</span><br><span class="line">            &lt;button&gt;提交&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">submit = (e) =&gt; &#123;</span><br><span class="line">    const &#123;username,password&#125; = this.state;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    console.log(username,password);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
>
>    

# React生命周期

#### 旧的声明周期

* ![image-20210425205425556](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210425205425556.png)

总结：

* ![image-20210425205625627](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210425205625627.png)

* 一般主要使用的是三个生命周期钩子render、componentDidMount、componentWillUnmount

#### 新的生命周期

[图片原址](https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/)

![image-20210426155832693](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210426155832693.png)





**新旧生命周期比较：**

> * 新的生命周期比旧的生命周期多了两个生命周期钩子函数(getDerivedStateFromProps、getSnapshotBeforeUpdate)，少了三个生命周期函数(componentWillMount、componentWillReceiveProps、componentWillUpdate三个will)
>
> * 新的生命周期拟废除三个will生命周期，但实际还可以用不过要加上unsafe_(因为在未来的React版本中，特别是启用异步渲染后，使用这些生命周期钩子可能会导致bug)

# React脚手架

#### 安装脚手架

* **全局**安装脚手架命令  npm i -g create-react-app
* 切换到相应的路径创建react项目  create-react-app react-staging
* 进入创建的项目文件夹
* 打开浏览器运行项目 npm start

#### 脚手架各个文件介绍

1. **整个工程目录：**

三个文件夹+四个文件：

![image-20210427151228386](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427151228386.png)

> node_modules、public、src文件夹
>
> gitignore、package-lock.json、package.json、ReADME.md

2. **public文件夹：**

![image-20210427151602928](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427151602928.png)

> favicon.ico：网页图标
>
> index.html: 主页面
>
> logo192.png：苹果手机添加到主屏幕上时的显示图标
>
> logo192/512.png:  用于应用加壳时的应用图标
>
> manifest.json: 应用加壳时的配置文件
>
> robots.txt: 爬虫信息描述

index.html文件：

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;%PUBLIC_URL%/favicon.ico&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 开启理想视口，用于移动端适配 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>/&gt;</span> </span><br><span class="line">  <span class="comment">&lt;!-- 用于配置浏览器页签的颜色(仅支持旧的安卓手机浏览器) --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;theme-color&quot;</span> <span class="attr">content</span>=<span class="string">&quot;#000000&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 网站描述 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span></span></span><br><span class="line"><span class="tag">    <span class="attr">name</span>=<span class="string">&quot;description&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">content</span>=<span class="string">&quot;Web site created using create-react-app&quot;</span></span></span><br><span class="line"><span class="tag">  /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 用于指定网页添加到苹果受手机主屏后的图标，仅支持苹果手机 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;apple-touch-icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;%PUBLIC_URL%/logo192.png&quot;</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 应用加壳的配置文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;manifest&quot;</span> <span class="attr">href</span>=<span class="string">&quot;%PUBLIC_URL%/manifest.json&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>React App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 网页不支持script标签时显示 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>You need to enable JavaScript to run this app.<span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 组件挂载位置 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

3. **src文件**

![image-20210427154231453](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427154231453.png)

> App.css: App组件的样式文件
>
> App.js: App组件，挂载在index.html的root标签上
>
> App.text.js 测试App组件的
>
> index.css: 主页面index的样式文件
>
> index.js: webpack的入口文件
>
> log.svg: 主页面上旋转的React的图标
>
> reportWebVitals.js：页面性能记录
>
> setupTests.js: 组件测试

index.js文件：

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入各种React库和App组件</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> reportWebVitals <span class="keyword">from</span> <span class="string">&#x27;./reportWebVitals&#x27;</span>;</span><br><span class="line"><span class="comment">//渲染组件到页面</span></span><br><span class="line">ReactDOM.render(</span><br><span class="line">  <span class="comment">//检测组件代码编写是否规范</span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span>  </span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span>,</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br><span class="line"><span class="comment">//性能检测</span></span><br><span class="line">reportWebVitals();</span><br></pre></td></tr></table></figure>

4. **四个文件**

![image-20210427155752276](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427155752276.png)

> .gitgnore:  git仓库文件
>
> package.json: 包的说明文件
>
> README.md: 包的说明文档(readme)

#### 简化脚手架

> 不是在真正的项目开发环境中，我们不需要面面俱到的考虑所有情况，可以对脚手架相应的文件进行删减

![image-20210427161239449](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427161239449.png)

操作：

> 删除public中所有的文件，新建主页面index.html
>
> 删除src中所有文件，新建App组件和index.js入口文件
>
> 配置index.js入口文件
>
> >  ![image-20210427162729594](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427162729594.png)
> >
> >  
>
> 配置App.js文件
>
> >  ![image-20210427164345474](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427164345474.png)
> >
> > 补充：`import React,&#123;Component&#125; from "react"` 因为在react库中，component对象也被暴露了所以才能直接在import中获取Component对象(模块语法)

#### 脚手架中组件结构

> React组件化编程，对于组件的存放位置、文件命名等的默认规范

* 一般组件存放在src专门的components文件中
* 路由组件存放在src专门的pages文件中
* 每个组件都单独建立一个文件夹保存**对应的**文件
* 组件内嵌套的组件如果**只作为此父组件的子组件**则单独创建一个文件夹保存在父组件的文件夹内
* 组件命名方法：
  1. 见名知意命名
  2. 都命名为index.js (好处：可以省略组件名直接引入)
* 组件文件可以用.jsx后缀和其他的js文件进行区分，实际的效果和.js文件相同

组件位置：

>  ![image-20210427181625128](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427181625128.png)

组件引入：

> *  ![image-20210427181646232](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427181646232.png)
>
>   js或jsx文件格式可以省略后缀.js或.jsx
>
> *  ![image-20210427181825105](C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210427181825105.png)
>
>   组件命名为index.js可以省略组件名

#### 脚手架配置代理

> 用于解决浏览器的跨域问题

原理：

> 将请求代理给其他服务器而不是通过浏览器进行请求，所以就没有了同源策略的限制，不会出现跨域问题

说明：

> 通过设置代理，下次请求时就直接请求代理服务器的地址，然后代理服务器在向真正的地址进行请求

方法1：

> 在package.json中追加如下配置
>
> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;proxy&quot;</span>: <span class="string">&quot;http://localhost:5000&quot;</span></span><br></pre></td></tr></table></figure>
>
> 说明：5000端口的是真正的资源地址，ajax首先访问3000的代理服务器地址，代理服务器在请求5000的地址
>
> 优点：
>
> * 配置简单
>
> 缺点：
>
> * 只能代理一个地址
> * 不能控制是否请求代理地址(即首先请求代理服务器，如果没有相应资源才请求代理位置)

方法2：

> * 在src下创建配置文件setupProxy.js
> * 编写配置文件：
>
> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> proxy = <span class="built_in">require</span>(<span class="string">&#x27;http-proxy-middleware&#x27;</span>);  <span class="comment">//引入相关的包，create-react-app已经在初始化的时候下载好了包，如果没有则需要手动下载包</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">app</span>)</span>&#123;</span><br><span class="line">	app.use(</span><br><span class="line">		proxy(<span class="string">&#x27;api1&#x27;</span>, &#123;</span><br><span class="line">			<span class="attr">target</span>: <span class="string">&#x27;http:localhost:5000&#x27;</span>, <span class="comment">//配置转发的目标位置</span></span><br><span class="line">			<span class="attr">changeOrigin</span>: <span class="literal">true</span>, </span><br><span class="line">			<span class="comment">/*</span></span><br><span class="line"><span class="comment">				是否将请求域名转换为真正的域名</span></span><br><span class="line"><span class="comment">			*/</span></span><br><span class="line">			<span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api1&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125; <span class="comment">//去除请求前缀</span></span><br><span class="line">		&#125;),</span><br><span class="line">		proxy(<span class="string">&#x27;api2&#x27;</span>, &#123;</span><br><span class="line">			<span class="attr">target</span>: <span class="string">&#x27;http:localhost:5001&#x27;</span>, <span class="comment">//配置转发的目标位置</span></span><br><span class="line">			<span class="attr">changeOrigin</span>: <span class="literal">true</span>, </span><br><span class="line">			<span class="comment">/*</span></span><br><span class="line"><span class="comment">				是否将请求域名转换为真正的域名</span></span><br><span class="line"><span class="comment">			*/</span></span><br><span class="line">			<span class="attr">pathRewrite</span>: &#123;<span class="string">&#x27;^/api2&#x27;</span>: <span class="string">&#x27;&#x27;</span>&#125; <span class="comment">//去除请求前缀</span></span><br><span class="line">		&#125;)</span><br><span class="line">	)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
>
>  优点：
>
> * 可以代理多个地址
> * 可以控制是否请求代理地址(如果url加有api前缀则请求代理地址，否则请求代理服务器)
>
> 缺点：
>
> * 配置繁琐



# React路由

#### hsitory对象

1. BOM的history对象介绍：

> 作用：
>
> > 提供对浏览器历史记录的访问和**无跳转**修改
>
> 属性：
>
> > **length**：保存浏览器的历史记录个数
> >
> > **state**：获取当前页面的state**对象**(如果不是通过pushState添加的记录则state为null)
>
> 方法
>
> > **go()**
> >
> > > 在**历史记录**中向前或向后跳转，相对于现在的页面位置
> > >
> > > 参数：整数
> > >
> > > * 正数向前跳转
> > > * 负数向后跳转
> >
> > **back()**
> >
> > >  在历史记录中向后跳转一页(等价于go(-1))
> >
> > **forward()**
> >
> > > 在历史记录中向前跳转一页(等价于go(1))
> >
> > **Html5中新增的两个方法**
> >
> > > **通过下述方法改变浏览器的url并不会立即触发浏览器对url的请求，即不会立刻刷新。当重新打开页面的时候会请求通过pushstate()添加的url的请求**
> > >
> > > pushState():
> > > 
> > > > 向浏览器中增加一个历史记录而不会触发跳转(仅仅只是址栏改变了)
> > > >
> > > > 参数：(state, title[, url])
> > > >
> > > > * state: 添加历史记录的state对象
> > > > * title：新页面的标题，但所有浏览都忽略该值，可以传入空字符串，**防止将来对方法的更改**(不懂)
> > > >
> > > > * url：添加历史记录的url，必须和当前页面的url是相同域名的，可以是绝对地址也可以是相对地址，相对地址则相对于当前页面进行解析
> > >>
> > > > **注意：**通过state参数改变页面的hash不会触发hashchange事件
> > >
> > > replaceState()
> > >
> > > > 和pushState方法一样，但功能变为了修改当前页面的state
> 
>popstate事件
> 
>> 当同一个文档的history对象出现变化时，就会触发popstate事件
> >
> > **注意：**pushState和replaceState方法不会触发此事件，仅当用于点击回退和前进按钮或js调用了back、forward、go方法才会触发此方法
> >
> > 回调函数：event对象，可以通过事件对象的state获取当前页面的state对象

#### hsah和history路由的区别

* hash只能改变url的hash值，而history可以改变**同源**下的所有路径
* history有state对象可以存储页面的相应信息(如滚动条的信息)
* 重新打开浏览器会触发对通过pushState和replaceState方法添加的url地址的请求，可能后端并没有相应的url，会导致出错

#### 自己创建history路由

步骤：

* 创建路由链接
* 创建组件显示区域
* 创建路由和组件的映射
* 监听路由变化

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;a onclick=<span class="string">&quot;changeRoute(&#x27;/page1&#x27;)&quot;</span>&gt;page1&lt;/a&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">onclick</span>=<span class="string">&quot;changeRoute(&#x27;/page2&#x27;)&quot;</span>&gt;</span>page2<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line">&lt;!-- 组件显示位置 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 编写路由链接</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="keyword">function</span> <span class="title">changeRoute</span> (<span class="params">url</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">console</span>.log(<span class="string">&#x27;1&#x27;</span>, url);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        history.pushState(<span class="literal">null</span>, <span class="string">&#x27;&#x27;</span>, url);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// return false; //禁止a标签的默认行为，既不跳转页面</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 注册路由</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Route = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="string">&#x27;/page1&#x27;</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">document</span>.querySelector(<span class="string">&#x27;h1&#x27;</span>).innerHTML= <span class="string">&#x27;page1&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="string">&#x27;/page2&#x27;</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">document</span>.querySelector(<span class="string">&#x27;h1&#x27;</span>).innerHTML=<span class="string">&#x27;page2&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// 监听路由变化</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="keyword">function</span> <span class="title">router</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">let</span> &#123;pathname&#125; = location;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">console</span>.log(pathname);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        Route[pathname] &amp;&amp; Route[pathname]();</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//当调用pushState方法是更新页面</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//(因为pushState方法无法触发popstate事件)</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> push = history.pushState;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    history.pushState = <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>)</span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="comment">// 通过apply调用原始的pushState方法，保证this和参数的正确</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">const</span> res = push.apply(<span class="built_in">this</span>, args);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        router();</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> res;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;popstate&#x27;</span>, router);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



#### 简单路由的创建

1. 下载react-router-dom路由支持库

> `npm i react-router-dom`

2. 从react-router-dom库中通过import引入Link、Route和BrowserRouter(或者HashRouter)组件
3. 引入路由组件
4. 路由器(BrowserRouter或HashRouter)包裹App组件，用于管理所有的路由

> `<BrowserRouter> <App /> </BrowserRouter>`

5. 编写路由链接

> `<Link to="/page1" >Page1</Link>`
>
> to属性用于改变url

6. 注册路由并指定路由显示的位置

> `<Route path="/page1" component=&#123;Page1&#125; />`
>
> path属性用于指定路径  component用于指定对应路由应该渲染的组件

代码：(只引入了关键代码)

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入Link和Route组件</span></span><br><span class="line"><span class="keyword">import</span> &#123; Link,Route &#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="comment">//引入路由组件</span></span><br><span class="line"><span class="keyword">import</span> Page1 <span class="keyword">from</span> <span class="string">&#x27;./pages/Page1&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Page2 <span class="keyword">from</span> <span class="string">&#x27;./pages/Page2&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    &#123;/* 编写路由链接 */&#125;</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/page1&quot;</span> &gt;</span>Page1<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&quot;/page2&quot;</span> &gt;</span>Page2<span class="tag">&lt;/<span class="name">Link</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    &#123;/* 注册路由 */&#125;</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/page1&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Page1&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/page2&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Page2&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

**注意：**

> 组件分为路由组件和一般组件，路由组件用一个和components同级的pages文件夹保存，便于区分

#### 路由相关组件

所有的组件都需要从react-router-dom引入

**Link**

> 用于创建路由链接，本质上是a标签

**NavLink**

> 类似Link，不过多了一个ActiveClassName属性，当用于点击时自动添加类；默认添加active类，如果不是添加active类需要手动添加类名
>
> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;NavLink to=<span class="string">&quot;/page1&quot;</span> &gt;Page1&lt;<span class="regexp">/NavLink&gt;  /</span><span class="regexp">/当点击此标签后，class自动加上active类</span></span><br></pre></td></tr></table></figure>
>
>     

**Route**

> 路由，由于匹配不同路径和组件的映射关系
>
> 关键属性**path**和**component**

**HashRouter**

> hash路由器，用于检测路由的变化并显示相应的组件

**BrowserRouter**

> 类似HashRouter  

**Switch**

> 单一路由匹配，提高效率
>
> 用Switch组件包裹路由后，每个路由只匹配一个组件，当找到这个组件后就不再向下查看了
>
> <figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Switch&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/page1&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Page1&#125;</span> /&gt;</span></span></span><br><span class="line">    &#123;<span class="comment">/* 渲染Page2组件，当page2路由匹配上page2后就不再向下查看了 */</span>&#125;</span><br><span class="line">	&#123;<span class="comment">/* 如果没有包裹Switch组件，则page2路由会渲染两个组件Page2和Page3 */</span>&#125;</span><br><span class="line">    &lt;Route path=<span class="string">&quot;/page2&quot;</span> component=&#123;Page2&#125; /&gt;  </span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&quot;/page2&quot;</span> <span class="attr">component</span>=<span class="string">&#123;Page3&#125;</span> /&gt;</span></span></span><br><span class="line">&lt;/Switch&gt;</span><br></pre></td></tr></table></figure>
>
>     

**withRouter**

> 是函数不是组件
>
> 参数：组件
>
> 返回值：组件
>
> 作用：让一般组件拥有路由组件的三个属性history、location和match

#### 路由组件和一般组件

区别：

* 路由组件由路由进行渲染，并传入三个主要props属性history、location和match；而普通组件由程序员传递props
* 路由组件结构上存储在pages文件夹中和components分开存储

#### 路由引起的样式丢失

补充：

> react-create-app包创建了一个服务器，用于模拟真实的开发环境。假设创建的服务器的地址是`http://localhost:3000`
>
> 访问此地址的资源时：
>
> * 默认public文件夹为根路径，即`http://localhost:3000/page2`即访问`public/page2`
> * 如果资源没找到，则默认返回`public/index.html`文件

问题：

> 通过引入Browser路由器，当改变文件的资源路径后，可能导致在index.html页面中引入的样式地址错误
>
> 如：`<link rel="stylesheet" href="./css/index.css">`引入public文件夹下css文件夹中的css文件
>
> 但只是相对路径的引入，当浏览器访问 `http://localhost:3000/page2`时，由于没找到相应资源，则服务器返回index.html页面
> 然后浏览器加载html页面，碰到link标签开始加载css资源，浏览器以为现在的index.html页面路径是page2，所以就会向地址`http://localhost:3000/page2/css/index.css`请求css资源，由于没有相应的文件，所以服务器返回index.html页面，导致了css样式的丢失

解决：

* 不同相对路径，去掉点，即`<link rel="stylesheet" href="/css/index.css">`(常用)

* 使用%PUBLIC_URL%，即`<link rel="stylesheet" href="%PUBLIC_URL%/css/index.css">`

  > 注意：这种方法只有在react脚手架中才有效

* 使用HashRouter；因为hash路由不改变资源路径



#### 模糊匹配和精准匹配

概念:

> 模糊匹配要求路由链接包含注册的路由，精准匹配要求路由链接和注册的路由完全相同

例子：

> `<NavLink to="/page1/a/b" >Page1</NavLink>` 和`<Route path="/page1" component=&#123;Page1&#125; />`
>
> 模糊路由可以匹配，精准不能匹配

使用：

> Route组件上加exact属性(boolean值，true便是精准匹配)
>
> <Route exact path="/page1" component=&#123;Page1&#125; />

#### 路由的push和replace

> 路由通过replaceState方法改变还是pushState方法改变

使用：

> 类似模糊和精准匹配
>
> Link组件上的replace属性(为true则是replace模式)

#### 路由重定向

概念：

> 自动跳转到相应路由

使用：

> Redirect组件
>
> `<Redirect to="/page1"/>`

#### 路由嵌套

> 直接在子组件中创建路由链接和注册路由，需要注意的是路由链接需要带上上级的路径
>
>不能够开启精准匹配，因为精准匹配会导致错误

#### 路由传参

> 路由组件和一般组件不同，路由组件由路由器内部控制何时渲染，所以传递参数需要借助路由Route和Link组件

三种方式：

* **params传参**

> 只能传递字符串类型数据，且将数据暴露在了地址栏
>
> 使用：
>
> * 路由链接**传参**：`<Link to='/test/tom/18'>详情</Link>`
> * 注册路由**获取参数**：`<Route to='/test/:tom/:18' component=&#123;Test&#125;>详情</Route>`
> * 接受参数：`this.props.match.params`  在Test组件内接受

* **search传参**

> 只能传递字符串类型数据，且将数据暴露在了地址栏
>
> 使用：
>
> * 路由链接传参：`<Link to='/test/?name=tom&age=18'>详情</Link>`
> * 注册路由：`<Route to='/test' component=&#123;Test&#125;>详情</Route>` 不需要获取参数
> * 接受参数：`this.props.location.search`  在Test组件内接受
>
> **注意：**获取的是urlencoded编码字符串，可以通过引入querystring库将其解析成对象形式数据
>
> > querystring主要方法：
> >
> > * stringify()  将对象转换成urlencoded编码
> > * parse() 将urlencoded编码转换成对象

* **state参数**

> 可以传递对象等复杂类型数据，且没有暴露数据
>
> 使用：
>
> * 路由链接传参：`<Link to=&#123;&#123;pathname:'/test', state:&#123;name: 'tom', age: 18&#125;&#125;&#125;&gt;详情&lt;/Link&gt;</code><blockquote>
<ul>
<li>注册路由：<code>&lt;Route to=&#39;/test&#39; component=&#123;Test&#125;&gt;详情&lt;/Route&gt;</code> 不需要获取参数</li>
<li>接受参数：<code>this.props.location.state</code>  在Test组件内接受</li>
</ul>
<p>注意：刷新页面后state参数仍然保留，因为保存在了浏览器location对象的state上</p>
</blockquote>
</li>
</ul>
<p><strong>注意</strong></p>
<blockquote>
<p>HashRouter如果通过state传递参数，则刷新后会丢失state数据，因为hash路由器没有state，所以state只是存储在自建的props对象中，刷新后重新执行js代码会都是数据</p>
</blockquote>
<h4 id="编程式路由"><a href="#编程式路由" class="headerlink" title="编程式路由"></a>编程式路由</h4><p>本质：</p>
<blockquote>
<p>通过路由组件props的history属性中的方法实现js操作路由改变</p>
</blockquote>
<p>方法：</p>
<blockquote>
<p>push、replace</p>
</blockquote>
<p>使用：</p>
<blockquote>
<p>可以实现三种形式的传参，具体方法和Link组件编写路由链接类似</p>
</blockquote>
<p>补充：</p>
<blockquote>
<p>go、goBack、goForward三个方法和浏览器hsitory的三个方法功能相同</p>
</blockquote>
<hr>



<h1 id="错误边界"><a href="#错误边界" class="headerlink" title="错误边界"></a>错误边界</h1><blockquote>
<p>检测后代组件的错误，并在后代组件出现错误的时候渲染替代组件，防止由于部分组件出现错误导致整个页面崩溃</p>
</blockquote>
<p><img src="C:\Users\Maibenben\AppData\Roaming\Typora\typora-user-images\image-20210502184146709.png" alt="image-20210502184146709"></p>
<h1 id="React哲学"><a href="#React哲学" class="headerlink" title="React哲学"></a>React哲学</h1><blockquote>
<p>官网地址(<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/thinking-in-react.html">https://zh-hans.reactjs.org/docs/thinking-in-react.html</a>)</p>
</blockquote>
<p>总结：</p>
<ul>
<li><p>首先通过设计的UI划分组件(可以和设计人员交流讨论，并参考设计人员photoshop的图层)</p>
</li>
<li><p>通过数据模型编写静态UI页面(将UI渲染和交互分开)。静态页面组件不能有state状态，因为state状态是用于交互的。<br>可以自上而下或自下而上编写组件，如果是编写复杂的应用则自下而上更加方便，因为方便<strong>查看效果</strong>，一步一步的逐渐看见应用的全貌</p>
</li>
<li><p>为交互做准备，确定<strong>最小</strong>的state状态和state的位置</p>
</li>
<li><p>添加反向数据流</p>
</li>
</ul>
<h1 id="React项目实践"><a href="#React项目实践" class="headerlink" title="React项目实践"></a>React项目实践</h1><blockquote>
<p>官方项目(<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/tutorial/tutorial.html">https://zh-hans.reactjs.org/tutorial/tutorial.html</a>)</p>
<p>（非必须）尚硅谷项目(<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1i4411N7Qc?p=2&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1i4411N7Qc?p=2&amp;spm_id_from=pageDriver</a>)</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://zhang20110.github.io/study_notes.github.io/2021/07/19/react%E7%AC%94%E8%AE%B0/" data-id="cksrg90p80002f0o11zyv343c" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/study_notes.github.io/2021/08/25/hello-world/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Hello World
        
      </div>
    </a>
  
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/study_notes.github.io/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/study_notes.github.io/archives/2021/07/">July 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/study_notes.github.io/2021/08/25/test-md/">test.md</a>
          </li>
        
          <li>
            <a href="/study_notes.github.io/2021/08/25/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/study_notes.github.io/2021/07/19/react%E7%AC%94%E8%AE%B0/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/study_notes.github.io/" class="mobile-nav-link">Home</a>
  
    <a href="/study_notes.github.io/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/study_notes.github.io/js/jquery-3.4.1.min.js"></script>



  
<script src="/study_notes.github.io/fancybox/jquery.fancybox.min.js"></script>




<script src="/study_notes.github.io/js/script.js"></script>





  </div>
</body>
</html>